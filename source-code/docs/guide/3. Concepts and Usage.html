<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>3 Concepts and Usage 1.6.2.1-SNAPSHOT</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/1.%20Overview.html"><strong>1</strong><span>Overview</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/2.%20Installation.html"><strong>2</strong><span>Installation</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/3.%20Concepts%20and%20Usage.html"><strong>3</strong><span>Concepts and Usage</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/4.%20Known%20Issues%20and%20Limitations.html"><strong>4</strong><span>Known Issues and Limitations</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/5.%20Roadmap.html"><strong>5</strong><span>Roadmap</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/6.%20Version%20History.html"><strong>6</strong><span>Version History</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p>        A plugin for creating a Vaadin application in Grails.
    </p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/2.%20Installation.html">&lt;&lt; <strong>2</strong><span>Installation</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../guide/4.%20Known%20Issues%20and%20Limitations.html"><strong>4</strong><span>Known Issues and Limitations</span> >></a></div>
                


                <div class="project">
                    <h1>3 Concepts and Usage - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Ondrej Kvasnovsky, Francis McKenzie</p>

                    <p><strong>Version:</strong> 1.6.2.1-SNAPSHOT</p>

                    
                </div>

                
                <div id="table-of-content">
                    <h2>Table of Contents</h2>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#3.1.%20Controllers,%20Views%20and%20Fragments"><strong>3.1</strong><span>Controllers, Views and Fragments</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#3.2%20A%20Simple%20Tutorial"><strong>3.2</strong><span>A Simple Tutorial</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#3.3%20Scaffolding%20a%20Domain%20Class"><strong>3.3</strong><span>Scaffolding a Domain Class</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#3.4%20Views%20and%20Tags"><strong>3.4</strong><span>Views and Tags</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#3.5%20Mixing%20Vaadin%20and%20Grails"><strong>3.5</strong><span>Mixing Vaadin and Grails</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#3.6%20Vaadin%20Controllers"><strong>3.6</strong><span>Vaadin Controllers</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#3.7%20Vaadin%20API"><strong>3.7</strong><span>Vaadin API</span></a>
                    </div>
                    
                </div>
                

                

<h1 id="3. Concepts and Usage">3 Concepts and Usage</h1>



<h2 id="3.1. Controllers, Views and Fragments">3.1 Controllers, Views and Fragments</h2>
The Vaadin plugin adopts the Grails convention of structuring an application into
Controllers and Views. However, since Vaadin is an AJAX-based framework
rather than a conventional Request-Response framework, we do not map
<strong class="bold">URLs</strong> to controllers but instead map <strong class="bold">Fragments</strong> to controllers.<p class="paragraph"/>As an example, say we want to create a screen for displaying a list of books.
In Grails, we would create a <code>BookController.groovy</code> file containing a <code>list()</code> method,
and a <code>book/list.gsp</code> file. This would then be accessible from a browser via
<code>http://localhost:8080/myapp/book/list</code><p class="paragraph"/>With the Vaadin plugin, we do exactly the same thing. We create a <code>BookVaadinController.groovy</code>
file containing a <code>list()</code> method, and a <code>book-vaadin/list.gsp</code> file. This is then accessible
from a browser via <code>http://localhost:8080/myapp#book/list</code>. Note the <code>'#'</code> in the URL to denote
the fragment!<p class="paragraph"/><blockquote class="note">
The naming convention for Vaadin controllers is important - the class name
must end with <code>VaadinController</code>.<p class="paragraph"/>Note that this method of identifying artefacts through the use of standard naming
conventions is very common in Grails!
</blockquote><p class="paragraph"/>


<h2 id="3.2 A Simple Tutorial">3.2 A Simple Tutorial</h2>
In this section, we will create a simple "Hello World" screen using Vaadin. If you
are new to Grails, it might be useful to familiarise yourself with the concepts
in the <a href="http://grails.org/doc/latest/guide/gettingStarted.html#aHelloWorldExample" target="blank">getting-started</a>
section of the <a href="http://grails.org/doc/latest/guide" target="blank">Grails User Guide</a>.<p class="paragraph"/>We will assume you have already installed Vaadin following the instructions in the 
<a href="../guide/single.html#2.%20Installation" class="guide">Installation</a> section. Now follow these steps:<p class="paragraph"/><h4>1. Create the Controller</h4><p class="paragraph"/>Create a VaadinController by entering the following at the command line:<p class="paragraph"/><div class="code"><pre>grails create&#45;vaadin&#45;controller myapp.Hello</pre></div><p class="paragraph"/>This simply creates an empty groovy class under the <code>grails-app/controllers</code> folder. Note that
<code>VaadinController</code> is automatically appended to the class name.<p class="paragraph"/><h4>2. Add an Action</h4><p class="paragraph"/>In the HelloVaadinController class, add a <code>greetings</code> method as follows:<p class="paragraph"/><div class="code"><pre>class HelloVaadinController &#123;
	def greetings() &#123;&#125;
&#125;</pre></div><p class="paragraph"/><h4>3. Create the View</h4><p class="paragraph"/>Create file <code>grails-app/views/hello-vaadin/greetings.gsp</code> with the following contents:<p class="paragraph"/><div class="code"><pre>&#60;div&#62;
  &#60;v:label&#62;Hello world!&#60;/v:label&#62;
&#60;/div&#62;</pre></div><p class="paragraph"/><h4>4. Run the App</h4><p class="paragraph"/>Finally, run the application using <code>grails run-app</code> and then browse to
<code>http://localhost:8080/myapp#hello/greetings</code>. You should see the
"Hello World!" message displayed.<p class="paragraph"/>(Note that you will need to replace <code>'myapp'</code> in the above URL with the name of your
grails project.)<p class="paragraph"/><h4>5. Use the Grails Theme</h4><p class="paragraph"/>Let's improve the appearance of our new page. Change the text in file
<code>grails-app/views/hello-vaadin/greetings.gsp</code> to the following:<p class="paragraph"/><div class="code"><pre>&#60;v:layout name=<span class="java&#45;quote">"vaadin"</span>&#62;
  &#60;v:label location=<span class="java&#45;quote">"body"</span>&#62;Hello world!&#60;/v:label&#62;
&#60;/v:layout&#62;</pre></div><p class="paragraph"/>Now refresh your browser page - you should see your "Hello World!" message again,
but this time within the familiar Grails theme.<p class="paragraph"/><blockquote class="note">
Notice we used the special tag <code>&#60;v:layout name="vaadin"&#62;</code> in the final step. This
<a href="../ref/Tags/layout.html" class="Tags">layout</a> tag looks for a <code>.gsp</code> file with the specified name in <code>grails-app/views/layouts</code>.
Take a look at <code>vaadin.gsp</code> in this directory in your app!
</blockquote> 


<h2 id="3.3 Scaffolding a Domain Class">3.3 Scaffolding a Domain Class</h2>
One of Grails's (and indeed other frameworks such as Ruby) most useful features is its
support for very quickly generating useable CRUD screens for your domain model. In
Grails, this can be done by running the
<a href="http://grails.org/doc/latest/ref/Command%20Line/generate-controller.html" target="blank">generate-controller</a>,
<a href="http://grails.org/doc/latest/ref/Command%20Line/generate-views.html" target="blank">generate-views</a> and
<a href="http://grails.org/doc/latest/ref/Command%20Line/generate-all.html" target="blank">generate-all</a> commands.<p class="paragraph"/>The Vaadin plugin provides the exact equivalent of the standard grails scaffolding
scripts, as follows:<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Command</strong></th><th><strong class="bold">Description</strong></th></tr><tr class="table-odd"><td><a href="../ref/Command Line/generate-vaadin-controller.html" class="Command Line">generate-vaadin-controller</a></td><td>Generates a new VaadinController in the <code>grails-app/controllers</code> dir<br/>for the specified domain class.</td></tr><tr class="table-even"><td><a href="../ref/Command Line/generate-vaadin-views.html" class="Command Line">generate-vaadin-views</a></td><td>Generates the Vaadin CRUD GSP views in the <code>grails-app/views</code> dir<br/>for the specified domain class.</td></tr><tr class="table-odd"><td><a href="../ref/Command Line/generate-vaadin-all.html" class="Command Line">generate-vaadin-all</a></td><td>Generates the Controller and Views for the specified domain class.</td></tr><tr class="table-even"><td><a href="../ref/Command Line/create-vaadin-controller.html" class="Command Line">create-vaadin-controller</a></td><td>Creates an empty VaadinController in the <code>grails-app/controllers</code> dir</td></tr><tr class="table-odd"><td><a href="../ref/Command Line/install-vaadin-templates.html" class="Command Line">install-vaadin-templates</a></td><td>Installs the templates used for the above scaffolding commands into<br/><code>src/templates/vaadin</code></td></tr></table><p class="paragraph"/>For example, if you have a Domain Class called
<code>com.somepackage.Author</code>, you should run the following at the command line to
scaffold a CRUD interface:<p class="paragraph"/><div class="code"><pre>grails generate&#45;vaadin&#45;all com.somepackage.Author</pre></div><p class="paragraph"/>You can then browse the CRUD interface by visiting <code>http://localhost:8080/myapp#author</code>.<p class="paragraph"/>Some of the benefits of Vaadin should now become apparent! Notice the
lazy-loading, infinitely scrollable table on the list screen. Also, for any Date fields
in your domain class, notice the Date Picker that gets automatically inserted. If that
is not enough, you should definitely visit the <a href="http://demo.vaadin.com/sampler" target="blank">Vaadin Sampler</a>
page and check out all the other ways you can spruce up your user interface!



<h2 id="3.4 Views and Tags">3.4 Views and Tags</h2>
In the Vaadin view GSPs, you can use all of the 
<a href="http://grails.org/doc/latest/guide/theWebLayer.html#tags" target="blank">Grails tags</a> as you would in a
normal Grails GSP.<p class="paragraph"/><blockquote class="note">
Sitemesh layout tags are currently not supported. Please use the Vaadin <a href="../ref/Tags/layout.html" class="Tags">layout</a> tag instead.
</blockquote><p class="paragraph"/>In addition, you can embed Vaadin components in GSPs using the tag library provided by this plugin:<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Tag</strong></th><th><strong class="bold">Description</strong></th></tr><tr class="table-odd"><td><strong class="bold">LAYOUTS</strong></td><td>&#160;</td></tr><tr class="table-even"><td><a href="../ref/Tags/accordion.html" class="Tags">accordion</a></td><td>Adds a <a href="http://vaadin.com/api/com/vaadin/ui/Accordion.html" target="blank">Accordion</a> component to the parent container.</td></tr><tr class="table-odd"><td><a href="../ref/Tags/horizontalLayout.html" class="Tags">horizontalLayout</a></td><td>Adds a <a href="http://vaadin.com/api/com/vaadin/ui/HorizontalLayout.html" target="blank">HorizontalLayout</a> component to the parent container.</td></tr><tr class="table-even"><td><a href="../ref/Tags/include.html" class="Tags">include</a></td><td>Includes the output of another controller/action in the current Gsp.</td></tr><tr class="table-odd"><td><a href="../ref/Tags/layout.html" class="Tags">layout</a></td><td>Renders the tag's body using another Gsp as a template.</td></tr><tr class="table-even"><td><a href="../ref/Tags/location.html" class="Tags">location</a></td><td>Adds the tag's body to the specified location in the parent container.</td></tr><tr class="table-odd"><td><a href="../ref/Tags/tab.html" class="Tags">tab</a></td><td>Configures a single tab of the parent <a href="http://vaadin.com/api/com/vaadin/ui/TabSheet.html" target="blank">TabSheet</a> component.</td></tr><tr class="table-even"><td><a href="../ref/Tags/tabs.html" class="Tags">tabs</a></td><td>Adds a <a href="http://vaadin.com/api/com/vaadin/ui/TabSheet.html" target="blank">TabSheet</a> component to the parent container.</td></tr><tr class="table-odd"><td><a href="../ref/Tags/verticalLayout.html" class="Tags">verticalLayout</a></td><td>Adds a <a href="http://vaadin.com/api/com/vaadin/ui/VerticalLayout.html" target="blank">VerticalLayout</a> component to the parent container.</td></tr><tr class="table-even"><td>&#160;</td><td>&#160;</td></tr><tr class="table-odd"><td><strong class="bold">TABLES</strong></td><td>&#160;</td></tr><tr class="table-even"><td><a href="../ref/Tags/table.html" class="Tags">table</a></td><td>Adds a <a href="http://vaadin.com/api/com/vaadin/ui/Table.html" target="blank">Table</a> component to the parent container.</td></tr><tr class="table-odd"><td><a href="../ref/Tags/column.html" class="Tags">column</a></td><td>Configures a single column of the parent <a href="http://vaadin.com/api/com/vaadin/ui/Table.html" target="blank">Table</a> component.</td></tr><tr class="table-even"><td>&#160;</td><td>&#160;</td></tr><tr class="table-odd"><td><strong class="bold">FORMS</strong></td><td>&#160;</td></tr><tr class="table-even"><td><a href="../ref/Tags/form.html" class="Tags">form</a></td><td>Adds a <a href="http://vaadin.com/api/com/vaadin/ui/Form.html" target="blank">Form</a> component to the parent container.</td></tr><tr class="table-odd"><td><a href="../ref/Tags/field.html" class="Tags">field</a></td><td>Adds a <a href="http://vaadin.com/api/com/vaadin/ui/AbstractField.html" target="blank">Field</a> to the parent container.</td></tr><tr class="table-even"><td><a href="../ref/Tags/checkBox.html" class="Tags">checkBox</a></td><td>Adds a <a href="http://vaadin.com/api/com/vaadin/ui/CheckBox.html" target="blank">CheckBox</a> field to the parent container.</td></tr><tr class="table-odd"><td><a href="../ref/Tags/comboBox.html" class="Tags">comboBox</a></td><td>Adds a <a href="http://vaadin.com/api/com/vaadin/ui/ComboBox.html" target="blank">ComboBox</a> field to the parent container.</td></tr><tr class="table-even"><td><a href="../ref/Tags/currencySelect.html" class="Tags">currencySelect</a></td><td>Adds a Currency-populated <a href="http://vaadin.com/api/com/vaadin/ui/Select.html" target="blank">Select</a> field to the parent container.</td></tr><tr class="table-odd"><td><a href="../ref/Tags/customField.html" class="Tags">customField</a></td><td>Adds a <a href="../gapi/org/grails/plugin/vaadin/ui/DefaultCustomField.html" class="api">DefaultCustomField</a> to the parent container.</td></tr><tr class="table-even"><td><a href="../ref/Tags/date.html" class="Tags">date</a></td><td>Adds a <a href="http://vaadin.com/api/com/vaadin/ui/DateField.html" target="blank">DateField</a> to the parent container.</td></tr><tr class="table-odd"><td><a href="../ref/Tags/file.html" class="Tags">file</a></td><td>Adds a <a href="../gapi/org/grails/plugin/vaadin/ui/DefaultUploadField.html" class="api">DefaultUploadField</a> to the parent container.</td></tr><tr class="table-even"><td><a href="../ref/Tags/listSelect.html" class="Tags">listSelect</a></td><td>Adds a <a href="http://vaadin.com/api/com/vaadin/ui/ListSelect.html" target="blank">ListSelect</a> field to the parent container.</td></tr><tr class="table-odd"><td><a href="../ref/Tags/localeSelect.html" class="Tags">localeSelect</a></td><td>Adds a Locale-populated <a href="http://vaadin.com/api/com/vaadin/ui/Select.html" target="blank">Select</a> field to the parent container.</td></tr><tr class="table-even"><td><a href="../ref/Tags/optionGroup.html" class="Tags">optionGroup</a></td><td>Adds a <a href="http://vaadin.com/api/com/vaadin/ui/OptionGroup.html" target="blank">OptionGroup</a> field to the parent container.</td></tr><tr class="table-odd"><td><a href="../ref/Tags/password.html" class="Tags">password</a></td><td>Adds a <a href="http://vaadin.com/api/com/vaadin/ui/PasswordField.html" target="blank">PasswordField</a> to the parent container.</td></tr><tr class="table-even"><td><a href="../ref/Tags/select.html" class="Tags">select</a></td><td>Adds a <a href="http://vaadin.com/api/com/vaadin/ui/Select.html" target="blank">Select</a> field to the parent container.</td></tr><tr class="table-odd"><td><a href="../ref/Tags/text.html" class="Tags">text</a></td><td>Adds a <a href="http://vaadin.com/api/com/vaadin/ui/TextField.html" target="blank">TextField</a> field to the parent container.</td></tr><tr class="table-even"><td><a href="../ref/Tags/textArea.html" class="Tags">textArea</a></td><td>Adds a <a href="http://vaadin.com/api/com/vaadin/ui/TextArea.html" target="blank">TextArea</a> field to the parent container.</td></tr><tr class="table-odd"><td><a href="../ref/Tags/timeZoneSelect.html" class="Tags">timeZoneSelect</a></td><td>Adds a TimeZone-populated <a href="http://vaadin.com/api/com/vaadin/ui/Select.html" target="blank">Select</a> field to the parent container.</td></tr><tr class="table-even"><td>&#160;</td><td>&#160;</td></tr><tr class="table-odd"><td><strong class="bold">MISC</strong></td><td>&#160;</td></tr><tr class="table-even"><td><a href="../ref/Tags/label.html" class="Tags">label</a></td><td>Adds a <a href="http://vaadin.com/api/com/vaadin/ui/Label.html" target="blank">Label</a> component to the parent container.</td></tr><tr class="table-odd"><td><a href="../ref/Tags/link.html" class="Tags">link</a></td><td>Adds a <a href="../gapi/org/grails/plugin/vaadin/ui/GrailsButton.html" class="api">GrailsButton</a> component to the parent container.</td></tr><tr class="table-even"><td><a href="../ref/Tags/warning.html" class="Tags">warning</a></td><td>Shows a warning-type <a href="http://vaadin.com/api/com/vaadin/ui/Window.Notification.html" target="blank">Window.Notification</a> in the application's main window.</td></tr><tr class="table-odd"><td><a href="../ref/Tags/error.html" class="Tags">error</a></td><td>Shows an error-type <a href="http://vaadin.com/api/com/vaadin/ui/Window.Notification.html" target="blank">Window.Notification</a> in the application's main window.</td></tr></table>



<h2 id="3.5 Mixing Vaadin and Grails">3.5 Mixing Vaadin and Grails</h2>
The default configuration is for  Vaadin to be served from the root context path, i.e. <code>'/'</code>.
However, this means that Vaadin will prevent any requests from reaching 'regular'
Grails controllers.<p class="paragraph"/>If you want to mix Vaadin controllers with Grails controllers in the same app,
you should change the <code>contextRelativePath</code> setting in <code>grails-app/conf/VaadinConfig.groovy</code>
to be something other than <code>'/'</code>.<p class="paragraph"/><h3>Example</h3><p class="paragraph"/>The following is set in <code>grails-app/conf/VaadinConfig.groovy</code>:<p class="paragraph"/><div class="code"><pre>vaadin &#123;
  // Other settings
  // ....<p class="paragraph"/>  contextRelativePath = <span class="java&#45;quote">"/myvaadinapp"</span>
&#125;</pre></div><p class="paragraph"/>The application contains a regular Grails controller <code>grails-app/controllers/BookController.groovy</code>:<p class="paragraph"/><div class="code"><pre>class BookController &#123;
  def index() &#123;&#125;
&#125;</pre></div><p class="paragraph"/>The Vaadin application is then accessible via <code>http://localhost:8080/myapp/myvaadinapp</code>,
while the regular Grails controller is accessible via
<code>http://localhost:8080/myapp/book</code><p class="paragraph"/><blockquote class="note">
For any Domain class, you can easily create a regular-Grails CRUD interface and a Vaadin
CRUD interface for it in the same app.<p class="paragraph"/>For example, for Domain class <code>mypackage.Book</code>, use <code>generate-all mypackage.Book</code> to scaffold
the Grails controller and views, and <code>generate-vaadin-all mypackage.Book</code> to scaffold the
Vaadin controller and views.<p class="paragraph"/>You could then access each as follows:<p class="paragraph"/><strong class="bold">Grails</strong>: <code>http://localhost:8080/myapp/book</code><p class="paragraph"/><strong class="bold">Vaadin</strong>: <code>http://localhost:8080/myapp/myvaadinapp#book</code> 
</blockquote>


<h2 id="3.6 Vaadin Controllers">3.6 Vaadin Controllers</h2>
A Vaadin controller is very similar to a regular Grails controller. It must exist under
<code>grails-app/controllers</code> and must have a name ending with <code>VaadinController</code>.<p class="paragraph"/>Grails treats Vaadin controllers like regular controllers. Therefore in general the features
available to regular controllers should also be available to Vaadin controllers. See
the <a href="http://grails.org/doc/latest/guide/single.html#controllers" target="blank">controllers</a> section of
the Grails user guide for further details about controllers.<p class="paragraph"/>However, note that Vaadin controllers do not operate within the standard servlet request/response
lifecycle. As such, some under-the-hood differences do exist, therefore not all controller
functionality may work as expected in Vaadin controllers. Some key differences to be aware
of are described in the following sections.<p class="paragraph"/><h3>URIs and Fragments</h3><p class="paragraph"/>As previously discussed, Vaadin Controllers are accessed in the browser by placing
the controller name at the start of the browser <strong class="bold">fragment</strong>, rather than in the URI. So:<p class="paragraph"/><div class="code"><pre>// Regular Grails Controller
http://localhost:8080/grailsapp/book/list<p class="paragraph"/>// Vaadin Controller
http://localhost:8080/grailsapp/vaadinapp&#35;book/list</pre></div><p class="paragraph"/><h3>Controller API</h3><p class="paragraph"/>Note that <a href="http://grails.org/doc/latest/ref/Controllers/render.html" target="blank">render</a>,
<a href="http://grails.org/doc/latest/ref/Controllers/redirect.html" target="blank">redirect</a>,
<a href="http://grails.org/doc/latest/ref/Controllers/params.html" target="blank">params</a>,
<a href="http://grails.org/doc/latest/ref/Controllers/flash.html" target="blank">flash</a> are specifically overridden
in Vaadin controllers, to provide support for the plugin's page-dispatching
mechanism. However, they can be treated like the corresponding regular Grails methods.<p class="paragraph"/>Controllers can reference <code>vaadinApplication</code> to get the Vaadin Application object
for the current session.<p class="paragraph"/><h3>Passing Domain Instances</h3><p class="paragraph"/>Unlike regular controllers, Vaadin controllers can receive Grails domain instances (and any
other Java object) in their params map. By contrast, the
<a href="http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterMap()" target="blank">params</a>
in a standard servlet request can only be strings.<p class="paragraph"/>This means that we can pass a domain instance from our controller to our view, which can
then pass it to another controller in the params map of a <a href="../ref/Tags/link.html" class="Tags">link</a> tag.<p class="paragraph"/>However, note that the second controller must
<a href="http://grails.org/doc/latest/ref/Domain%20Classes/merge.html" target="blank">merge</a> the domain instance
into its persistence session before using it. For example:<p class="paragraph"/><div class="code"><pre>class BookController &#123;
  def update &#123;<p class="paragraph"/>    // Get the book instance passed in the params
    def book = params.instance<p class="paragraph"/>    // Attempt to merge Book instance into current persistence context
    def bookMergedAndValidated = book.merge()<p class="paragraph"/>    // Merging failed, possibly due to validation error
    <span class="java&#45;keyword">if</span> (!bookMergedAndValidated) &#123;
      render(view: <span class="java&#45;quote">"edit"</span>, model: &#91;bookInstance: book&#93;)
      <span class="java&#45;keyword">return</span>
    &#125;<p class="paragraph"/>    // Merging succeeded, now you can save the instance
    bookMergedAndValidated.save(flush:<span class="java&#45;keyword">true</span>)
    &#91;bookInstance: bookMergedAndValidated&#93;
  &#125;
&#125;</pre></div>



<h2 id="3.7 Vaadin API">3.7 Vaadin API</h2>
The Vaadin plugin automatically injects an API into an application's Vaadin classes.
The injected API is as follows:<p class="paragraph"/><h3>All Vaadin Classes</h3><p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Field</strong></th><th><strong class="bold">Description</strong></th></tr><tr class="table-odd"><td><strong class="bold">vaadinApplication</strong></td><td>Gets the Vaadin <a href="http://vaadin.com/api/com/vaadin/Application.html" target="blank">Application</a> object for this session.</td></tr><tr class="table-even"><td><strong class="bold">getBean()</strong></td><td>Specify a Spring bean to retrieve by name.</td></tr><tr class="table-odd"><td><strong class="bold">i18n()</strong></td><td>Provides same functionality as the Grails <a href="http://grails.org/doc/latest/ref/Tags/message.html" target="blank">g:message</a> tag.</td></tr></table><p class="paragraph"/><blockquote class="note">
A Vaadin class requiring API injection must:
<ul class="star">
<li>Exist under the <code>grails-app/vaadin</code> directory</li>
<li>Have <code>vaadin</code> in its package name, or the package name of any of its superclasses.</li>
</ul><p class="paragraph"/></blockquote><p class="paragraph"/><h3>Preventing API Injection</h3><p class="paragraph"/>You can add the annotation <code>&#64;NoVaadinAPI</code> to any class in your application,
and this will prevent the above API from being injected.<p class="paragraph"/>To create a Vaadin Application without the API injection for any classes, and
without the controller-view dispatching mechanism, just subclass
<code>com.vaadin.Application</code> in your Vaadin Application class, instead of
<code>org.grails.plugin.vaadin.VaadinApplication</code><p class="paragraph"/><h3>Accessing Vaadin Application</h3><p class="paragraph"/>In Vaadin Controllers, Views, Taglibs and Classes the current session's Vaadin Application
can be obtained through the <code>vaadinApplication</code> variable.<p class="paragraph"/>If other classes need to access the Vaadin Application, they can use the following code:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> org.grails.plugin.vaadin.VaadinApplicationContextHolder<p class="paragraph"/>class MyClass &#123;
	def myMethod() &#123;<p class="paragraph"/>	    // Gets the session's Vaadin Application
		def app = VaadinApplicationContextHolder.vaadinApplication
	&#125;
&#125;</pre></div>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/2.%20Installation.html">&lt;&lt; <strong>2</strong><span>Installation</span></a></div>
                
                    <div class="toc-item next-right"><a href="../guide/4.%20Known%20Issues%20and%20Limitations.html"><strong>4</strong><span>Known Issues and Limitations</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Command Line</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/create-vaadin-controller.html">create-vaadin-controller</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/generate-vaadin-all.html">generate-vaadin-all</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/generate-vaadin-app.html">generate-vaadin-app</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/generate-vaadin-controller.html">generate-vaadin-controller</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/generate-vaadin-views.html">generate-vaadin-views</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/install-vaadin-templates.html">install-vaadin-templates</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Tags</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Tags/accordion.html">accordion</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/checkBox.html">checkBox</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/column.html">column</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/comboBox.html">comboBox</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/currencySelect.html">currencySelect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/customField.html">customField</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/date.html">date</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/error.html">error</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/field.html">field</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/file.html">file</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/form.html">form</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/horizontalLayout.html">horizontalLayout</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/include.html">include</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/label.html">label</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/layout.html">layout</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/link.html">link</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/listSelect.html">listSelect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/localeSelect.html">localeSelect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/location.html">location</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/optionGroup.html">optionGroup</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/password.html">password</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/select.html">select</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/styling.html">styling</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/tab.html">tab</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/table.html">table</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/tabs.html">tabs</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/text.html">text</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/textArea.html">textArea</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/timeZoneSelect.html">timeZoneSelect</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/verticalLayout.html">verticalLayout</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/warning.html">warning</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
